<div class="row mb-2 mt-2">
  <div class="col">
    <div class="card">
      <div class="card-header">
        <h4 class="card-title">Allocation(s)</h4>
      </div>
      <!-- /.card-header -->
      <div class="card-body table-responsive p-0">
        <table id="allocation_table" class="display">
          <thead>
            <tr>
              <th>Account</th>
              <th>FY</th>
              <th>Default</th>
              <th>Allocation</th>
              <th>Used & Pending SUs</th>
              <th>Balance</th>
              <th>PI</th>
            </tr>
          </thead>
        </table>
      </div>
      <!-- /.card-body -->
    </div>
    <!-- /.card -->
  </div>

</div>

<div class="row mb-2">
  <div class="col-md-6">
    <div class="row mb-2">
      <div class="col">
        <div class="card">
          <div class="card-header">
            <div class="d-flex align-items-center">
              <h4 class="mr-auto p-3">Your Disk Quota</h4>
              <button type="button" class="btn btn-primary" class="nav-link active btn-rounded mb-4" data-toggle="modal" data-target="#modalQuotaRequestForm">Request</button>
            </div>
          </div>
          <!-- /.card-header -->
          <div class="card-body table-responsive p-0">
            <table class="table">
              <thead>
                <tr>
                  <th>Disk</th>
                  <th>Disk Usage</th>
                  <th>Disk Limit</th>
                  <th>File Usage</th>
                  <th>File Limit</th>
                  <th> % File Usage</th>

                </tr>
              </thead>
              <tbody>
                <% @quota.each do |disk| %>
                <tr>
                  <td><%= disk.disk_name %></td>
                  <td><%= disk.disk_usage %></td>
                  <td><%= disk.disk_limit %></td>
                  <td><%= disk.file_usage %></td>
                  <td><%= disk.file_limit %></td>
                  <td><%= ((disk.file_usage.to_f / disk.file_limit.to_f)*100).to_i %>%</td>
                </tr>
                <% end %>
              </tbody>
            </table>
          </div>
          <!-- /.card-body -->
        </div>
        <!-- /.card -->
      </div>
    </div>
    <div class="row md-2">
      <div class="col">
        <div class="card">
          <div class="card-header">
            <h4 class="card-title">Cluster Information</h4>
          </div>
          <!-- /.card-header -->
          <div class="card-body table-responsive p-0">
            <table class="table">
              <thead>
                <tr>
                  <th>Resource Name</th>
                  <th>Utilization</th>
                  <th>% Utilized </th>
                </tr>
              </thead>
              <tbody>
                <% @usages.each do |usage| %>
                <tr>
                  <td><%= usage.resource %></td>
                  <td><%= usage.used %> / <%= usage.total%></td>
                  <td><span class="badge bg-normal"><%= usage.percent %> </span></td>
                </tr>

                <% end %>
              </tbody>
            </table>
          </div>
          <!-- /.card-body -->
        </div>
        <!-- /.card -->
      </div>
    </div>
  </div>

  <div class="col-md-6">
    <div class="card">
      <div class="card-header">
        <h4 class="card-title">Your Jobs</h4>
      </div>
      <!-- /.card-header -->
      <div class="card-body table-responsive p-0">
        <table class="table table-head-fixed text-nowrap">
          <thead>
            <tr>
              <th>ID</th>
              <th>Name</th>
              <!-- <th>Partition</th> -->
              <!-- <th>Nodes</th> -->
              <!-- <th>CPUs</th> -->
              <th>State</th>
              <!-- <th>Time</th> -->
              <!-- <th>Time Left</th> -->
              <!-- <th>Start Time</th> -->
              <!-- <th>Reason</th> -->
              <!-- <th>Nodelist</th> -->
            </tr>
          </thead>
          <tbody>
            <% if @jobs.length > 0 %>
            <% @jobs.each do |job| %>
            <tr>
              <td><%= job.id %></td>
              <td><%= job.name %></td>
              <!-- <td><%= job.partition %></td> -->
              <!-- <td><%= job.nodes %></td> -->
              <!-- <td><%= job.cpus %></td> -->
              <td><%= job.state %></td>
              <!-- <td><%= job.time %></td> -->
              <!-- <td><%= job.time_left %></td> -->
              <!-- <td><%= job.start_time %></td> -->
              <!-- <td><%= job.reason %></td> -->
              <!-- <td><%= job.nodelist %></td> -->
            </tr>
            <% end %>
            <% else %>
            <tr>
              <td>You have no active jobs.</td>
            </tr>
            <% end %>
          </tbody>
        </table>
      </div>
      <!-- /.card-body -->
    </div>
    <!-- /.card -->
  </div>
</div>

<!-- Model Forms -->
<div class="modal fade" id="modalQuotaRequestForm" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
  aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Quota Increase Request</h4>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <i class="fas fa-user prefix grey-text"></i>
          <input type="text" id="form34" class="form-control validate">
          <label data-error="wrong" data-success="right" for="form34">Amount of Additional Disk Quota (Optional)</label>
        </div>

        <div class="md-form mb-5">
          <i class="fas fa-envelope prefix grey-text"></i>
          <input type="email" id="form29" class="form-control validate">
          <label data-error="wrong" data-success="right" for="form29">File Limit Increase (Optional)</label>
        </div>

        <div class="md-form">
          <i class="fas fa-pencil prefix grey-text"></i>
          <textarea type="text" id="form8" class="md-textarea form-control" rows="4"></textarea>
          <label data-error="wrong" data-success="right" for="form8">Justification</label>
        </div>

      </div>
      <div class="modal-footer d-flex justify-content-center">
        <button type="button" class="btn btn-success">Send Request</button>
        <!-- <button class="btn btn-unique">Send <i class="fas fa-paper-plane-o ml-1"></i></button> -->
      </div>
    </div>
  </div>
</div>